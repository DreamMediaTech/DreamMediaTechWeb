<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dream.mapper.MemberMapper">

<resultMap id="MemberMap" type="com.dream.pojo.Member">
<id property="mId" column="Mid"></id>
<result property="birthday" column="Birthday"></result>
<result property="mail" column="Mail"></result>
<result property="alipay" column="Alipay"></result>
<result property="wechat" column="wechat"></result>
<result property="reBate" column="Rebate"></result>
<result property="introducer" column="Introducer"></result>
<result property="firstSuperior" column="FisrstSuperior"></result>
<result property="secondSuperior" column="SeconSuperior"></result>
<result property="bonusIntegral" column="BonusIntegral"></result>
<result property="consumptionIntegral" column="ConsumptionIntegral"></result>
<result property="sharingIntegral" column="SharingIntegral"></result>
<result property="superQuota" column="SuperQuota"></result>
<result property="iId" column="Iid"></result>
<association property="user" javaType="com.dream.pojo.User">
   <id property="uId" column="Uid"></id>
    <result property="uName" column="Uname"></result>
     <result property="uSex" column="Usex"></result>
      <result property="uPhone" column="Upassword"></result>
       <result property="mId" column="Mid"></result>
        <result property="agId" column="AGid"></result>
</association>
</resultMap>
<select id="queryallmember" resultMap="MemberMap">
select * from member m , user u where u.Mid=m.Mid
</select>

<select id="querymember" resultMap="MemberMap" parameterType="Member">
select * from member m , user u where u.Mid=m.Mid and m.Mid=#{mId}
</select>

<update id="updatamember" parameterType="Member">
update member m,user u 
<set>
<if test="Uname!=null and Uname !=''">
u.Uname=#{uName}
</if>
<if test="Usex!=null and Usex !=''">
u.Usex=#{uSex}
</if>
<if test="Uname!=null and Uname !=''">
u.Uname=#{uName}
</if>
<if test="Bitrhday!=null and Birthday!=''">
m.Birthday=#{birthday}
</if>
<if test="Mail!=null and Mail !=''">
m.Mail=#{mail}
</if>
<if test="Alipay!=null and Alipay !=''">
m.Alipay=#{alipay}
</if>
<if test="WeChat !=null and WeChat !=''">
m.WeChat=#{wechat}
</if>

</set>
</update>
</mapper>